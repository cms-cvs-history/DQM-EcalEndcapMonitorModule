process ECALDQM = {

     module ecalUncalibHit = ecalFixedAlphaBetaFitUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalFixedAlphaBetaFitUncalibRecHit.cfi"
#     module ecalUncalibHit = ecalWeightUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"

     replace ecalUncalibHit.EBdigiCollection = ecalDigis:ebDigis
     replace ecalUncalibHit.EEdigiCollection = ecalDigis:eeDigis

include "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"

     replace ecalRecHit.EBuncalibRecHitCollection = ecalUncalibHit:EcalUncalibRecHitsEB
     replace ecalRecHit.EEuncalibRecHitCollection = ecalUncalibHit:EcalUncalibRecHitsEE

include "DQM/EcalEndcapMonitorModule/data/EcalEndcapMonitorModule.cfi"

     replace ecalEndcapMonitorModule.enableMonitorDaemon = false
     replace ecalEndcapMonitorModule.enableCleanup = false
     replace ecalEndcapMonitorModule.runType = 3 # MTCC/PHYSICS

include "DQM/EcalEndcapMonitorTasks/data/EcalEndcapMonitorTasks.cfi"

include "DQM/EcalEndcapMonitorTasks/data/disableCleanup.cff"

     replace ecalEndcapOccupancyTask.EBDigiCollection = ecalDigis:ebDigis
     replace ecalEndcapPedestalOnlineTask.EBDigiCollection = ecalDigis:ebDigis

include "DQM/EcalEndcapMonitorClient/data/EcalEndcapMonitorClient.cfi"

     replace ecalEndcapMonitorClient.outputFile = "EcalEndcapMonitorClient.root"
     replace ecalEndcapMonitorClient.maskFile = "maskfile.dat"
     replace ecalEndcapMonitorClient.mergeRuns = true
     replace ecalEndcapMonitorClient.location = "H4"
     replace ecalEndcapMonitorClient.baseHtmlDir = "."
     replace ecalEndcapMonitorClient.enableTCC = true
     replace ecalEndcapMonitorClient.enableCluster = true
     replace ecalEndcapMonitorClient.enableMonitorDaemon = false
     replace ecalEndcapMonitorClient.prefixME = ""
     replace ecalEndcapMonitorClient.enableServer = false

     module preScaler = Prescaler{ int32 prescaleFactor = 1 }

     module eventSource = EventCoordinatesSource{
       untracked bool enableMonitorDaemon = false
     }

include "RecoEcal/EgammaClusterProducers/data/ecalClusteringSequence.cff"

     sequence ecalEndcapDataSequence = { preScaler,
                                         eventSource,
                                         ecalUncalibHit,
                                         ecalRecHit, 
                                         islandBasicClusters,
                                         islandSuperClusters,
                                         hybridSuperClusters }

     sequence ecalEndcapMonitorSequence = { ecalEndcapMonitorModule,
                                            ecalEndcapMonitorClient }

     path p = { ecalEndcapDataSequence, ecalEndcapMonitorSequence }

     endpath q = { ecalEndcapDefaultTasksSequence, ecalEndcapClusterTask }

#     service = LockService{ }

     untracked PSet maxEvents = {untracked int32 input = 150}
     source = PoolSource {
#---
       untracked vstring fileNames = { 'file:/tmp/7C8A11F2-3BAF-DB11-8213-00188B79A34B.root' }
#---
#       untracked vstring fileNames = {
#           "/store/mc/2006/12/22/mc-physval-120-ZToEE-LowLumi/0020/38771C47-FF9C-DB11-8496-00304875ABE5.root",
#           "/store/mc/2006/12/22/mc-physval-120-ZToEE-LowLumi/0020/3A7647EF-FD9C-DB11-9025-001731AF685D.root"
#           "/store/mc/2006/12/21/mc-onsel-120_QCD_pt_30_50/0018/123194E5-B19A-DB11-835C-001731AF66FF.root",
#           "/store/mc/2006/12/21/mc-onsel-120_QCD_pt_50_80/0017/FACF4422-E697-DB11-9C9A-00E08133CDA0.root",
#           "/store/mc/2006/12/21/mc-onsel-120_QCD_pt_80_120/0028/7C8A11F2-3BAF-DB11-8213-00188B79A34B.root",
#           "/store/mc/2006/12/21/mc-onsel-120_QCD_pt_120_170/0015/02CE970A-2095-DB11-BF4C-003048322B76.root"
#       }
     }

     es_source = EcalTrivialConditionRetriever{
       untracked double adcToGeVEBConstant = 0.035
       untracked vdouble amplWeights = { -0.333, -0.333, -0.333,
                                          0.000,  0.000,  1.000,
                                          0.000,  0.000,  0.000,  0.000 }
       untracked vdouble pedWeights  = {  0.333,  0.333,  0.333,
                                          0.000,  0.000,  0.000,
                                          0.000,  0.000,  0.000,  0.000 }
       untracked vdouble jittWeights = {  0.040,  0.040,  0.040,
                                          0.000,  1.320, -0.050,
                                         -0.500, -0.500, -0.400,  0.000 }
     }

     service = MessageLogger{
       untracked vstring destinations = { "cout" }
       untracked vstring categories = { "EcalTBInputService",
                                        "EcalTBRawToDigi", 
                                        "EcalTBRawToDigiTriggerType",
                                        "EcalTBRawToDigiTpg",
                                        "EcalTBRawToDigiNumTowerBlocks",
                                        "EcalTBRawToDigiTowerId",
                                        "EcalTBRawToDigiTowerSize",
                                        "EcalTBRawToDigiChId",
                                        "EcalTBRawToDigiGainZero",
                                        "EcalTBRawToDigiGainSwitch",
                                        "EcalTBRawToDigiDccBlockSize",
                                        "EcalEndcapMonitor"
                                      }
       untracked PSet cout = {
         untracked string threshold = "WARNING"
         untracked PSet default                        = { untracked int32 limit = 0 }
         untracked PSet EcalTBInputService             = { untracked int32 limit = 0 }
         untracked PSet EcalTBRawToDigi                = { untracked int32 limit = 1000 }
         untracked PSet EcalTBRawToDigiTriggerType     = { untracked int32 limit = 1000 }
         untracked PSet EcalTBRawToDigiTpg             = { untracked int32 limit = 1000 }
         untracked PSet EcalTBRawToDigiNumTowerBlocks  = { untracked int32 limit = 1000 }
         untracked PSet EcalTBRawToDigiTowerId         = { untracked int32 limit = 1000 }
         untracked PSet EcalTBRawToDigiTowerSize       = { untracked int32 limit = 1000 }
         untracked PSet EcalTBRawToDigiChId            = { untracked int32 limit = 1000 }
         untracked PSet EcalTBRawToDigiGainZero        = { untracked int32 limit = 1000 }
         untracked PSet EcalTBRawToDigiGainSwitch      = { untracked int32 limit = 1000 }
         untracked PSet EcalTBRawToDigiDccBlockSize    = { untracked int32 limit = 1000 }
         untracked PSet EcalEndcapMonitor              = { untracked int32 limit = 0 }
         untracked bool noTimeStamps = true
         untracked bool noLineBreaks = true
       }
     }

     service = DaqMonitorROOTBackEnd{ }

}
